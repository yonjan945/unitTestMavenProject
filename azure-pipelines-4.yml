trigger:
- master

pool:
  name: Default
  demands:
  - agent.os -equals Darwin

steps:
# 1. Checkout repo
- checkout: self

# 2. Optional: run Maven tests
- script: |
    echo "Running Maven tests..."
    mvn test
  displayName: "Run Maven Tests"

# 3. Package the project
- script: |
    echo "Packaging project..."
    mvn package
  displayName: "Maven Package"

- task: MavenAuthenticate@0
  inputs:
    artifactsFeeds: 'MyMavenfeed'

- task: Maven@4
  inputs:
    mavenPomFile: 'pom.xml'
    goals: 'deploy'
    options: '-s $(MAVEN_SETTINGS_XML)'


